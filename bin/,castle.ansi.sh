#!/bin/sh
set -e
#                                                  !_
#                                                  |*~=-.,
#                                                  |_,-'`
#                                                  |
#                                                  |
#                                                 /^\
#                   !_                           /   \
#                   |*`~-.,                     /,    \
#                   |.-~^`                     /#"     \
#                   |                        _/##_   _  \_
#              _   _|  _   _   _            [ ]_[ ]_[ ]_[ ]
#             [ ]_[ ]_[ ]_[ ]_[ ]            |_=_-=_ - =_|
#           !_ |_=_ =-_-_  = =_|           !_ |=_= -    |
#           |*`--,_- _        |            |*`~-.,= []  |
#           |.-'|=     []     |   !_       |_.-"`_-     |
#           |   |_=- -        |   |*`~-.,  |  |=_-      |
#          /^\  |=_= -        |   |_,-~`  /^\ |_ - =[]  |
#      _  /   \_|_=- _   _   _|  _|  _   /   \|=_-      |
#     [ ]/,    \[ ]_[ ]_[ ]_[ ]_[ ]_[ ]_/,    \[ ]=-    |
#      |/#"     \_=-___=__=__- =-_ -=_ /#"     \| _ []  |
#     _/##_   _  \_-_ =  _____       _/##_   _  \_ -    |\
#    [ ]_[ ]_[ ]_[ ]=_0~{_ _ _}~0   [ ]_[ ]_[ ]_[ ]=-   | \
#    |_=__-_=-_  =_|-=_ |  ,  |     |_=-___-_ =-__|_    |  \
#     | _- =-     |-_   | ((* |      |= _=       | -    |___\
#     |= -_=      |=  _ |  `  |      |_-=_       |=_    |/+\|
#     | =_  -     |_ = _ `-.-`       | =_ = =    |=_-   ||+||
#     |-_=- _     |=_   =            |=_= -_     |  =   ||+||
#     |=_- /+\    | -=               |_=- /+\    |=_    |^^^|
#     |=_ |+|+|   |= -  -_,--,_      |_= |+|+|   |  -_  |=  |
#     |  -|+|+|   |-_=  / |  | \     |=_ |+|+|   |-=_   |_-/
#     |=_=|+|+|   | =_= | |  | |     |_- |+|+|   |_ =   |=/
#     | _ ^^^^^   |= -  | |  <&>     |=_=^^^^^   |_=-   |/
#     |=_ =       | =_-_| |  | |     |   =_      | -_   |
#     |_=-_       |=_=  | |  | |     |=_=        |=-    |
#^^^^^^^^^^`^`^^`^`^`^^^""""""""^`^^``^^`^^`^^`^`^``^`^``^``^^
# 40x24 - 132x50
main() {

    printf %s\\n \
    'https://www.asciiart.eu/buildings-and-places/castles' \
    'https://poor.dev/blog/terminal-anatomy/' \
    'https://github.com/tingstad/dotfiles'

    #cursor to top and clear:
    printf [2H[J

    middle vertical
    right 8
    wall

    pos 4 8
    tower # 15 wide

    pos 4 1
    right 9999
    left 8
    tower

    lawn

    up 6
    middle horizontal
    left 4
    door

    printf '\033[m'
    right 999
    down 999
}

door() {
    yellow
    for i in        \
        ' _,--,_ '  \
        '/ |  | \'  \
        '| |  | |'  \
        '| |  <&>'  \
        '| |  | |'  \
        '| |  | |'
    do
        printf %s "$i"
        down
        left 8
    done
    green
    printf '""""""""'
}

middle() {
    case $1 in
        vertical)
            op1=down
            op2=up
            ;;
        horizontal)
            op1=right
            op2=left
            ;;
        *)
            echo "unexpected $1"
            exit
    esac
    i=1024
    while [ $i -gt 1 ]; do
        $op1 $i
        i=$(( i / 2 ))
        $op2 $i
        i=$(( i / 2 ))
    done
}

tower() {
    flag
    down
    roof
}

roof() {
    red
    for i in          \
           '/^\'      \
          '/   \'     \
         '/,    \'    \
        '/#"     \'   \
       '/##_   _  \'
    do
        left 1
        printf %s "$i"
        left ${#i}
        down
    done
    left 2
    grey
    for i in \
     '[ ]_[ ]_[ ]_[ ]' \
     '|_=__-_=-_  =_|'
    do
        printf %s "$i"
        left ${#i}
        down
    done
    right 1
    i=0
    while [ $(( i+=1 )) -lt 88 ]; do
        [ $i -eq 1 ] || down
        printf %s '|_=_-=_ - =_|'
        left 13
    done
}

flag() {
    #  !_
    #  |*~=-.,
    #  |_,-'`
    #  |
    #  |
    down 4     # 4B
    yellow
    printf '|'
    up; left   # A; D
    printf '|'
    blue
    up; left   # A; D
    printf %s \|_,-\'\`
    up; left 6 # A; 6D
    printf %s '|*~=-.,'
    up; left 7 # A; 7D
    printf '!_'
    left 2     # 2D
    down 4     # 4B
}

wall() {
    grey
    right 999
    i=0; while [ $(( i+=1 )) -lt 100 ]; do
        #  _   _   _   _   _
        # [ ]_[ ]_[ ]_[ ]_[ ]
        printf ']'
        up; left 2
        printf '_'
        down
        left 2
        printf '['
        left 2
        printf '_'
        left 2
    done
    down
    right 999
    i=0; while [ $(( i+=1 )) -lt 100 ]; do
        tmp='_=-___=__=__- =-_ -=_ '
        while [ -n "$tmp" ]; do
            rest=${tmp#?}
            first=${tmp%"$rest"}
            printf "$first"
            left 2
            tmp=$rest
        done
    done
    right 999
    left 8
    printf '\033[K'
    up
    printf '\033[K'
    up
    printf '\033[K'
    printf '\033[8G'
    printf '\033[1K'
    down
    printf '\033[1K'
    down
    printf '\033[1K'
}

lawn() {
    green
    gras='^^^^^^^^^^`^`^^`^`^`^^^^`^^``^^`^^`^^`^`^``^`^``^``^^'
    i=0
    while :
    do
        j=$(( i * ${#gras} ))
        while read -r one; do
            pos 999 $j
            printf %s "$one"
            j=$(( j + 1 ))
        done <<EOF
$(printf %s "$gras" | sed 's/./&\n/g')
EOF
        [ $(( i+=1 )) -lt 8 ] || break
    done
}

red()   { printf '\033[38;2;190;97;107m' ; }
blue()  { printf '\033[38;2;167;216;255m'; }
yellow(){ printf '\033[38;2;227;176;110m'; }
grey()  { printf '\033[38;2;112;117;121m'; }
green() { printf '\033[38;2;163;189;141m'; }

up()   { [ ${1:-1} -lt 1 ] || printf "\033[${1}A"; }
down() { [ ${1:-1} -lt 1 ] || printf "\033[${1}B"; }
right(){ [ ${1:-1} -lt 1 ] || printf "\033[${1}C"; }
left() { [ ${1:-1} -lt 1 ] || printf "\033[${1}D"; }
pos()  { printf "\033[$1;$2H"; }

main

exit
cat - <<"EOF"
#[8;20H[38;2;167;216;255m!_[B[2D|*`~-.,[B[7D|.-~^`[2;51H!_[B[2D|*~=-.,[B[7D|_,-'`[14;12H!_[B[2D|*`--,[B[6D|.-'[16;34H!_[B[2D|*`~-.,[B[7D|_,-~`[14;43H!_[B[2D|*`~-.,[B[7D|_.-"`[11;20H[38;2;227;176;110m|[B[D|[5;51H|[B[D|[17;12H|[19;34H|[17;43H|[18;11H[38;2;190;97;107m/^\[B[4D/   \[B[6D/,    \[B[8D/#"     \[B[10D/##_   _  \[7;50H/^\[B[4D/   \[B[6D/,    \[B[8D/#"     \[B[10D/##_   _  \[18;42H[38;2;190;97;107m/^\[B[4D/   \[B[6D/,    \[B[8D/#"     \[B[10D/##_   _  \[22;25H[38;2;167;216;255m_____[B[8D0~{_ _ _}~0[B[9D|  ,  |[B[7D| ((* |[B[7D|  `  |[B[6D`-.-`[30;25H[38;2;227;176;110m_,--,_[B[7D/ |  | \[B[8D| |  | |[B[8D| |  <&>[B[8D| |  | |[B[8D| |  | |[28;12H_[B[2D/+\[B[4D|+|+|[B[5D|+|+|[B[5D|+|+|[B[5D^^^^^[28;43H_[B[2D/+\[B[4D|+|+|[B[5D|+|+|[B[5D|+|+|[B[5D^^^^^[25;57H___[B[3D/+\[B[3D|+|[B[3D|+|[B[3D^^^[11;45H[38;2;112;117;121m_[3C_[3C_[3C_[B[14D[ ]_[ ]_[ ]_[ ][12;15H_[3C_[3C_[3C_[3C_[13;14H[ ]_[ ]_[ ]_[ ]_[ ]            |_=_-=_ - =_|[14;15H|_=_ =-_-_  = =_|[14;46H|=_= -    |[15;18H_- _        |[15;50H= []  |[16;16H|=     []     |[16;49H_-     |[17;16H|_=- -        |[17;46H|=_-      |[18;16H|=_= -        |[18;46H|_ - =[]  |[19;7H_[19;15H_|_=- _   _   _|  _[19;37H_[19;46H|=_-      |[20;6H[ ][20;16H[ ]_[ ]_[ ]_[ ]_[ ]_[ ]_[20;47H[ ]=-    |[21;7H|[21;17H_=-___=__=__- =-_ -=_[21;48H| _ []  |[22;6H_[3C_[3C_[3C_-_ =[22;37H_[3C_[3C_[3C_ -    |\[23;5H[ ]_[ ]_[ ]_[ ]=_[23;36H[ ]_[ ]_[ ]_[ ]=-   | \[24;5H|_=__-_=-_  =_|-=_[24;36H|_=-___-_ =-__|_    |  \[25;6H| _- =-     |-_[25;37H|= _=       | -    |[3C\[26;6H|= -_=      |=  _[26;37H|_-=_       |=_    |[3C|[27;6H| =_  -     |_ = _[27;37H| =_ = =    |=_-   |[3C|[28;6H|-_=-[28;18H|=_   =            |=_= -[28;49H|  =   |[3C|[29;6H|=_-[29;18H| -=               |_=-[29;49H|=_    |[3C|[30;6H|=_[30;18H|= -  -[30;37H|_=[30;49H|  -_  |=  |[31;6H|  -[31;18H|-_=[31;37H|=_[31;49H|-=_   |_-/[32;6H|=_=[32;18H| =_=[32;37H|_-[32;49H|_ =   |=/[33;6H| _[33;18H|= -[33;37H|=_=[33;49H|_=-   |/[34;6H|=_ =       | =_-_[34;37H|   =_      | -_   |[35;6H|_=-_       |=_=[35;37H|=_=        |=-    |[36;1H[38;2;163;189;141m^^^^^^^^^^`^`^^`^`^`^^^""""""""^`^^``^^`^^`^^`^`^``^`^``^``^^[36H
EOF

